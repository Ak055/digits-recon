# -*- coding: utf-8 -*-
"""
Created on Thu Apr 14 15:14:45 2022

@author: AnushKolakalur
"""
import zmq
context = zmq.Context()
from DigitsRecon_config import drconfig
dr = drconfig()

# =============================================================================
# =============================================================================
# # Socket to talk to server
# =============================================================================
# =============================================================================
print("\n Connecting to Digits Recon serverâ€¦ \n")
socket = context.socket(zmq.REQ)
socket.connect("tcp://localhost:5555")

for n in range(1,5): # # keeping running for 5 iterations
    num = input(
        "\n There are 360 test images listed in an array so please enter a number in between 1-360 \n")
    
# =============================================================================
# =============================================================================
# #     display the image that is choosen by the sender
# =============================================================================
# =============================================================================
    dr.fordisp(dr.X_test[num])
# =============================================================================
# =============================================================================
# # only number from the range is accepted
# =============================================================================
# =============================================================================
    if int(num) > 360 or int(num) < 0:
        print("Error!! invalid")
    else:      
        socket.send_string(num)
        
# =============================================================================
# =============================================================================
# #     recieve the model prediction and then display
# =============================================================================
# =============================================================================
        pred = socket.recv()
        print("\n)")
        print(pred)
        
        n +=1